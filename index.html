<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºç§‘2ç­ç­çº§ç»Ÿè®¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#7C3AED',
                        accent: '#EC4899',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        dark: '#1E293B',
                        light: '#F1F5F9'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .table-shadow {
                box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.1);
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            }
            .btn-hover {
                transition: all 0.2s ease;
            }
            .btn-hover:hover {
                transform: translateY(-1px);
            }
            .btn-hover:active {
                transform: translateY(0);
            }
            .container-bg {
                background: linear-gradient(135deg, #F2F7F5 0%, #E8F4EA 100%);
            }
            
            /* æŠ¤çœ¼æ¨¡å¼è°ƒæ•´ */
            body {
                color: #2D3748;
            }
            
            .bg-white {
                background-color: #F9FCFA !important;
            }
            
            .bg-gray-50 {
                background-color: #F3F8F5 !important;
            }
            .input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200;
            }
            .status-badge {
                @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-all duration-300 ease-in-out;
            }
            .gradient-text {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
                background-image: linear-gradient(90deg, #4F46E5, #7C3AED);
            }
        }
    </style>
</head>
<body class="container-bg min-h-screen font-sans text-dark">
    <div class="container mx-auto px-4 py-8">
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <div class="text-center mb-8">
            <h1 class="text-[clamp(1.8rem,4vw,2.8rem)] font-bold gradient-text mb-2 tracking-tight">
                æ™ºç§‘2ç­ç­çº§ç»Ÿè®¡
            </h1>
            <p class="text-gray-500 text-lg animate-fadeIn">ç­çº§ä½œä¸šæäº¤æƒ…å†µç»Ÿè®¡ç³»ç»Ÿ</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- æœç´¢å¡ç‰‡ -->
            <div class="bg-white rounded-xl p-4 md:p-6 card-hover">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1 relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
                            <i class="fa fa-search"></i>
                        </span>
                        <input id="searchInput" type="text" 
                            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg input-focus"
                            placeholder="æœç´¢å­¦ç”Ÿå§“å...">
                    </div>
                    <div class="flex flex-1 gap-2">
                        <select id="genderFilter" 
                            class="flex-1 px-4 py-2 border border-gray-300 rounded-lg input-focus">
                            <option value="all">å…¨éƒ¨æ€§åˆ«</option>
                            <option value="ç”·">ç”·ç”Ÿ</option>
                            <option value="å¥³">å¥³ç”Ÿ</option>
                        </select>
                        <select id="statusFilter" 
                            class="flex-1 px-4 py-2 border border-gray-300 rounded-lg input-focus">
                            <option value="all">å…¨éƒ¨çŠ¶æ€</option>
                            <option value="submitted">å·²äº¤</option>
                            <option value="notSubmitted">æœªäº¤</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ç»Ÿè®¡å¡ç‰‡ -->
            <div class="bg-white rounded-xl p-4 md:p-6 card-hover lg:col-span-2">
                <div class="flex flex-col md:flex-row items-center justify-between">
                    <div class="flex-1 grid grid-cols-2 md:grid-cols-3 gap-4 mb-4 md:mb-0">
                        <div class="text-center p-3 rounded-lg bg-gray-50">
                            <p class="text-sm text-gray-500">æ€»äººæ•°</p>
                            <p id="totalCount" class="text-2xl font-bold text-primary">0</p>
                        </div>
                        <div class="text-center p-3 rounded-lg bg-gray-50">
                            <p class="text-sm text-gray-500">å·²äº¤äººæ•°</p>
                            <p id="submittedCount" class="text-2xl font-bold text-success">0</p>
                        </div>
                        <div class="text-center p-3 rounded-lg bg-gray-50">
                            <p class="text-sm text-gray-500">æœªäº¤äººæ•°</p>
                            <p id="notSubmittedCount" class="text-2xl font-bold text-danger">0</p>
                        </div>
                    </div>
                    <div class="w-full md:w-32 h-32">
                        <canvas id="statusChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¡¨æ ¼ -->
        <div class="bg-white rounded-xl p-4 md:p-6 mb-6 table-shadow card-hover">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">åºå·</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å§“å</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ€§åˆ«</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">çŠ¶æ€</th>
                        </tr>
                    </thead>
                    <tbody id="classTable" class="bg-white divide-y divide-gray-200">
                    </tbody>
                </table>
            </div>
            <!-- ç©ºçŠ¶æ€æç¤º -->
            <div id="emptyState" class="hidden py-12 text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4">
                    <i class="fa fa-search text-gray-400 text-2xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900">æœªæ‰¾åˆ°åŒ¹é…çš„å­¦ç”Ÿ</h3>
                <p class="mt-1 text-gray-500">è¯·å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶æˆ–ç­›é€‰é€‰é¡¹</p>
            </div>
        </div>

        <!-- ç»“æœæ˜¾ç¤º -->
        <div class="bg-white rounded-xl p-4 md:p-6 mb-6 table-shadow card-hover">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold text-dark">ç»Ÿè®¡ç»“æœ</h2>
            </div>
            <div class="mb-4">
                <textarea id="resultText" class="w-full h-40 p-4 border border-gray-300 rounded-lg input-focus" placeholder="æœªäº¤äººå‘˜åå•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            </div>
            <div class="flex flex-wrap gap-4 justify-end">
                <button id="copyBtn" class="px-6 py-2 bg-secondary text-white rounded-lg shadow btn-hover flex items-center">
                    <i class="fa fa-copy mr-2"></i>å¤åˆ¶ç»“æœ
                </button>
                <button id="exportBtn" class="px-6 py-2 bg-primary text-white rounded-lg shadow btn-hover flex items-center">
                    <i class="fa fa-download mr-2"></i>å¯¼å‡ºæœªäº¤äººå‘˜
                </button>
                <button id="resetBtn" class="px-6 py-2 bg-gray-200 text-dark rounded-lg shadow btn-hover flex items-center">
                    <i class="fa fa-refresh mr-2"></i>é‡ç½®
                </button>
            </div>
        </div>

        <footer class="text-center text-gray-500 text-sm mt-8">
            <p> @å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆğŸ˜‚</p>
        </footer>
    </div>

    <script>
        const classData = [
            { id: 1, name: 'å½­æ•”æ´‹', contact: '', gender: 'ç”·', status: false },
            { id: 2, name: 'ä¾¯å©·', contact: '', gender: 'å¥³', status: false },
            { id: 3, name: 'ç„¦é˜³', contact: '', gender: 'ç”·', status: false },
            { id: 4, name: 'åˆ˜å“ç‚˜', contact: '', gender: 'ç”·', status: false },
            { id: 5, name: 'é’ŸèƒœèŠ‚', contact: '', gender: 'ç”·', status: false },
            { id: 6, name: 'åˆ˜ä½³ç‘', contact: '', gender: 'ç”·', status: false },
            { id: 7, name: 'æ—åº†', contact: '', gender: 'å¥³', status: false },
            { id: 8, name: 'é»„åšå¥', contact: '', gender: 'ç”·', status: false },
            { id: 9, name: 'é»„å¨Ÿ', contact: '', gender: 'å¥³', status: false },
            { id: 10, name: 'ç½—ä¼Ÿ', contact: '', gender: 'ç”·', status: false },
            { id: 11, name: 'ææ³½æ˜', contact: '', gender: 'ç”·', status: false },
            { id: 12, name: 'ææ²»æ´‹', contact: '', gender: 'ç”·', status: false },
            { id: 13, name: 'åºæ˜Šå®‡', contact: '', gender: 'ç”·', status: false },
            { id: 14, name: 'å­™é›¨å˜‰çª', contact: '', gender: 'å¥³', status: false },
            { id: 15, name: 'æ²™æ™º', contact: '', gender: 'ç”·', status: false },
            { id: 16, name: 'ç‹è¿ªæ±›', contact: '', gender: 'ç”·', status: false },
            { id: 17, name: 'è‚–ä¿Šåº·', contact: '', gender: 'ç”·', status: false },
            { id: 18, name: 'è®¸ä½³ç’‡', contact: '', gender: 'å¥³', status: false },
            { id: 19, name: 'å¾å¿—', contact: '', gender: 'ç”·', status: false },
            { id: 20, name: 'å‘¨åšæ—', contact: '', gender: 'ç”·', status: false },
            { id: 21, name: 'è¯¸è‘›æ –é¢', contact: '', gender: 'å¥³', status: false },
            { id: 22, name: 'éƒ‘æ°', contact: '', gender: 'ç”·', status: false },
            { id: 23, name: 'èµµæŸ±ç¨‹', contact: '', gender: 'ç”·', status: false },
            { id: 24, name: 'é’Ÿä¹¦ä»ª', contact: '', gender: 'ç”·', status: false },
            { id: 25, name: 'æ›¹æ¨', contact: '', gender: 'ç”·', status: false },
            { id: 26, name: 'ä»»ç¥ºå°§', contact: '', gender: 'ç”·', status: false },
            { id: 27, name: 'åˆ˜å®‡', contact: '', gender: 'ç”·', status: false },
            { id: 28, name: 'å¤ä½³å®', contact: '', gender: 'ç”·', status: false },
            { id: 29, name: 'ç‹æ˜¥éœ–', contact: '', gender: 'ç”·', status: false },
            { id: 30, name: 'é™ˆç€š', contact: '', gender: 'ç”·', status: false },
            { id: 31, name: 'å”æ¢“å¤', contact: '', gender: 'ç”·', status: false }
        ];

    
        let filteredData = [...classData];
        let statusChart = null;

        // æ¸²æŸ“è¡¨æ ¼
        function renderTable() {
            const tableBody = document.getElementById('classTable');
            const emptyState = document.getElementById('emptyState');
            tableBody.innerHTML = '';

            if (filteredData.length === 0) {
                tableBody.classList.add('hidden');
                emptyState.classList.remove('hidden');
                return;
            }

            tableBody.classList.remove('hidden');
            emptyState.classList.add('hidden');

            filteredData.forEach((student, index) => {
                const row = document.createElement('tr');
                row.className = index % 2 === 0 ? 'bg-white hover:bg-gray-50 transition-colors' : 'bg-gray-50 hover:bg-gray-100 transition-colors';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-dark">${student.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${student.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="status-badge ${student.gender === 'ç”·' ? 'bg-blue-100 text-blue-800' : 'bg-pink-100 text-pink-800'}">
                            ${student.gender}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <button class="status-btn px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 ${student.status ? 'bg-success text-white shadow-success/20' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}" data-id="${student.id}">
                            ${student.status ? 'å·²äº¤' : 'æœªäº¤'}
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.status-btn').forEach(btn => {
                btn.addEventListener('click', toggleStatus);
            });

            updateStatistics();
        }

        // åˆ‡æ¢çŠ¶æ€
        function toggleStatus(e) {
            const id = parseInt(e.currentTarget.dataset.id);
            const student = classData.find(s => s.id === id);
            if (student) {
                student.status = !student.status;
                e.currentTarget.classList.add('scale-90');
                setTimeout(() => {
                    e.currentTarget.classList.remove('scale-90');
                }, 100);
                // é‡æ–°åº”ç”¨è¿‡æ»¤æ¡ä»¶
                applyFilters();
            }
        }

        // åº”ç”¨è¿‡æ»¤æ¡ä»¶
        function applyFilters() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const genderFilter = document.getElementById('genderFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            filteredData = classData.filter(student => {
                const matchesSearch = student.name.toLowerCase().includes(searchText);
                const matchesGender = genderFilter === 'all' || student.gender === genderFilter;
                const matchesStatus = statusFilter === 'all' || 
                                     (statusFilter === 'submitted' && student.status) || 
                                     (statusFilter === 'notSubmitted' && !student.status);
                
                return matchesSearch && matchesGender && matchesStatus;
            });

            renderTable();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStatistics() {
            const totalCount = filteredData.length; // ä½¿ç”¨è¿‡æ»¤åçš„æ•°æ®è®¡ç®—æ€»äººæ•°
            const submittedCount = filteredData.filter(student => student.status).length;
            const notSubmittedCount = totalCount - submittedCount;

            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('submittedCount').textContent = submittedCount;
            document.getElementById('notSubmittedCount').textContent = notSubmittedCount;
            updateChart(submittedCount, notSubmittedCount);
        }

        // æ›´æ–°é¥¼å›¾
        function updateChart(submittedCount, notSubmittedCount) {
            const ctx = document.getElementById('statusChart').getContext('2d');
            const colors = {
                submitted: '#10B981', 
                notSubmitted: '#EF4444' 
            };

            if (statusChart) {
                statusChart.destroy();
            }

            statusChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['å·²äº¤', 'æœªäº¤'],
                    datasets: [{
                        data: [submittedCount, notSubmittedCount],
                        backgroundColor: [colors.submitted, colors.notSubmitted],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    cutout: '70%',
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                    return `${label}: ${value}äºº (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }

        // å¯¼å‡ºæœªäº¤äººå‘˜
        function exportNotSubmitted() {
            const notSubmitted = classData.filter(student => !student.status);
            const count = notSubmitted.length;
            const names = notSubmitted.map(student => student.name).join('ï¼Œ');
            
            const resultText = document.getElementById('resultText');
            if (count === 0) {
                resultText.value = 'æ‰€æœ‰äººå‘˜å‡å·²æäº¤ï¼';
                // æ·»åŠ æˆåŠŸæç¤ºåŠ¨ç”»
                resultText.classList.add('border-success', 'bg-green-50');
                setTimeout(() => {
                    resultText.classList.remove('border-success', 'bg-green-50');
                }, 2000);
            } else {
                resultText.value = `${count}äººæœªäº¤ï¼Œå§“åï¼š${names}`;
            }
        }

        // å¤åˆ¶ç»“æœ
        function copyResult() {
            const resultText = document.getElementById('resultText');
            resultText.select();
            document.execCommand('copy');
            
            // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„ä¸´æ—¶æç¤º
            const copyBtn = document.getElementById('copyBtn');
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fa fa-check mr-2"></i>å·²å¤åˆ¶';
            copyBtn.classList.add('bg-success');
            copyBtn.classList.remove('bg-secondary');
            
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
                copyBtn.classList.remove('bg-success');
                copyBtn.classList.add('bg-secondary');
            }, 2000);
        }

        // é‡ç½®æ‰€æœ‰
        function resetAll() {
          
            if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰å­¦ç”Ÿçš„çŠ¶æ€å—ï¼Ÿ')) {
                classData.forEach(student => {
                    student.status = false;
                });
                
                // æ¸…ç©ºæœç´¢å’Œç­›é€‰
                document.getElementById('searchInput').value = '';
                document.getElementById('genderFilter').value = 'all';
                document.getElementById('statusFilter').value = 'all';
                applyFilters();
                
                // æ¸…ç©ºç»“æœæ–‡æœ¬æ¡†
                document.getElementById('resultText').value = '';
                
                // æ·»åŠ é‡ç½®æˆåŠŸçš„è§†è§‰åé¦ˆ
                const resetBtn = document.getElementById('resetBtn');
                resetBtn.classList.add('bg-success', 'text-white');
                resetBtn.innerHTML = '<i class="fa fa-check mr-2"></i>å·²é‡ç½®';
                setTimeout(() => {
                    resetBtn.classList.remove('bg-success', 'text-white');
                    resetBtn.classList.add('bg-gray-200', 'text-dark');
                    resetBtn.innerHTML = '<i class="fa fa-refresh mr-2"></i>é‡ç½®';
                }, 2000);
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            applyFilters();
            document.getElementById('exportBtn').addEventListener('click', exportNotSubmitted);
            document.getElementById('copyBtn').addEventListener('click', copyResult);
            document.getElementById('resetBtn').addEventListener('click', resetAll);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
            document.getElementById('genderFilter').addEventListener('change', applyFilters);
            document.getElementById('statusFilter').addEventListener('change', applyFilters);
        });
    </script>
</body>
</html>
